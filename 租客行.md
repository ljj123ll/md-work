# ÂâçÁ´Ø

### ÁõÆÂΩïËß£Êûê



```vue
<template>
    <div id="site-header" :class="{ 'scrolled': isScrolled }">
        <div class="navbar-container">
            <!-- Â∑¶ËæπlogoÂå∫Âüü -->
            <div class="navbar-header">
                <a href="#" class="navbar-brand">
                    <span class="navbar-brand-logo"></span>
                </a>
            </div>

            <!-- ‰∏≠Èó¥Êï¥‰ΩìÂØºËà™Âå∫ -->
            <div class="site-header-navbar">
                <!-- ‰∏≠Â∑¶‰æßÁöÑÂØºËà™Ê†è -->
                <ul class="navbar-category">
                    <li class="category-item" v-for="(item, index) in navItems" :key="index"
                        :class="{ 'active': activeIndex === index }">
                         
                        <RouterLink :to="getRoutePath(index)"
                            class="nav-item-title"
                            @click="setActive(index)"
                            >
                            {{ item }}
                        </RouterLink>
                    </li>
                </ul>

                <!-- Âè≥‰æßÁöÑÊêúÁ¥¢ÔºåÁôªÂΩïÔºåË¥≠Áâ©ËΩ¶ -->
                <ul class="navbar-right">
                    <!-- üî¥ ÂÖ≥ÈîÆ‰øÆÊîπÔºöÊêúÁ¥¢ÂõæÊ†á + ÊÇ¨ÊµÆÂºπÂá∫ÁöÑÊêúÁ¥¢Ê†è -->
                    <li class="nav-search">
                        <!-- ÊêúÁ¥¢ÂõæÊ†á -->
                        <a href="" class="nav-link-search" @click.prevent>
                            <span class="search-btn"></span>
                        </a>
                        <!-- ÊÇ¨ÊµÆÂºπÂá∫ÁöÑÊêúÁ¥¢Ê†èÔºàÈªòËÆ§ÈöêËóèÔºâ -->
                        <div class="search-bar">
                            <input type="text" placeholder="ÊêúÁ¥¢ÂÜÖÂÆπ...">
                            <button class="search-submit">ÊêúÁ¥¢</button>
                        </div>
                    </li>

                    <li class="nav-user">
                        <RouterLink :to="userStore.isLoggedIn ? '/profile' : '/login'" class="nav-link-user">
                            <div v-if="userStore.isLoggedIn && userStore.userInfo?.avatar" class="user-avatar">
                                <img :src="baseImgUrl + userStore.userInfo.avatar" alt="Áî®Êà∑Â§¥ÂÉè">
                            </div>
                            <span v-else class="user-btn"></span>
                        </RouterLink>
                    </li>
                    <li class="nav-store">
                        <a href="" class="nav-link-store">
                            <span class="store-btn"></span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- ÁßªÂä®Á´ØËèúÂçïÊåâÈíÆ -->
            <button class="mobile-menu-btn" @click="toggleMobileMenu" :class="{ 'active': isMobileMenuOpen }">
                <span class="hamburger"></span>
            </button>
        </div>

        <!-- ÁßªÂä®Á´ØËèúÂçï -->
        <div class="mobile-menu" :class="{ 'open': isMobileMenuOpen }">
            <ul class="mobile-nav">
                <li v-for="(item, index) in navItems" :key="index" :class="{ 'active': activeIndex === index }">
                    <a href="#" @click="setActive(index)">{{ item }}</a>
                </li>
            </ul>
        </div>

        <!-- üî¥ Âà†Èô§ÂéüÊù•ÁöÑÂÖ®Â±èÊêúÁ¥¢Ê°Ü -->
    </div>
</template>


<script setup lang="ts">
import { ref, onMounted, onUnmounted, watch } from 'vue';
import { useRoute } from 'vue-router';
import { useUserStore } from '@/stores/modules/user';

// ÂØºËà™È°πÊï∞ÊçÆ
const navItems = ref(['È¶ñÈ°µ', 'ÂÖ≥‰∫éÊàë‰ª¨', 'ÁßüËµÅ‰∏≠ÂøÉ', 'Êñ∞ÈóªËµÑËÆØ', 'ÂÆ¢Êúç‰∏≠ÂøÉ']);

// Ëé∑ÂèñÂΩìÂâçË∑ØÁî±
const route = useRoute();
const userStore = useUserStore();

// ÂÆö‰πâÂêéÁ´ØÂõæÁâáÊúçÂä°ÁöÑÂü∫Á°Ä URLÔºàÊ†πÊçÆÂÆûÈôÖÂêéÁ´ØÂú∞ÂùÄ‰øÆÊîπÔºâ
const baseImgUrl = 'http://localhost:3000';

// Ê†πÊçÆÁ¥¢ÂºïËøîÂõûÂØπÂ∫îÁöÑË∑ØÁî±Ë∑ØÂæÑ
const getRoutePath = (index) => {
  // ‰∏é router ÈÖçÁΩÆ‰∏≠ÁöÑ path ‰∏Ä‰∏ÄÂØπÂ∫î
  const paths = [
    '/',                // È¶ñÈ°µÔºàÂØπÂ∫î index=0Ôºâ
    '/about',           // ÂÖ≥‰∫éÊàë‰ª¨ÔºàÂØπÂ∫î index=1Ôºâ
    '/rentcenter',      // ÁßüËµÅ‰∏≠ÂøÉÔºàÂØπÂ∫î index=2Ôºâ
    '/news',            // Êñ∞ÈóªËµÑËÆØÔºàÂØπÂ∫î index=3Ôºâ
    '/clienteleservice' // ÂÆ¢Êúç‰∏≠ÂøÉÔºàÂØπÂ∫î index=4Ôºâ
  ];
  return paths[index];
};

// Ê†πÊçÆË∑ØÁî±Ë∑ØÂæÑËé∑ÂèñÂØπÂ∫îÁöÑÁ¥¢Âºï
const getRouteIndex = (path) => {
  const paths = [
    '/',                // È¶ñÈ°µÔºàÂØπÂ∫î index=0Ôºâ
    '/about',           // ÂÖ≥‰∫éÊàë‰ª¨ÔºàÂØπÂ∫î index=1Ôºâ
    '/rentcenter',      // ÁßüËµÅ‰∏≠ÂøÉÔºàÂØπÂ∫î index=2Ôºâ
    '/news',            // Êñ∞ÈóªËµÑËÆØÔºàÂØπÂ∫î index=3Ôºâ
    '/clienteleservice' // ÂÆ¢Êúç‰∏≠ÂøÉÔºàÂØπÂ∫î index=4Ôºâ
  ];
  const index = paths.indexOf(path);
  return index !== -1 ? index : 0; // ÈªòËÆ§ËøîÂõûÈ¶ñÈ°µÁ¥¢Âºï
};

// Ê¥ªË∑ÉÁöÑÂØºËà™È°πÁ¥¢Âºï
const activeIndex = ref(0);
// ÁßªÂä®Á´ØËèúÂçïÁä∂ÊÄÅ
const isMobileMenuOpen = ref(false);
// ÊªöÂä®Áä∂ÊÄÅ - Áî®‰∫éÂØºËà™Ê†èÊ†∑ÂºèÂèòÂåñ
const isScrolled = ref(false);

// ËÆæÁΩÆÊ¥ªË∑ÉÂØºËà™È°π
const setActive = (index: number) => {
    activeIndex.value = index;
    isMobileMenuOpen.value = false;
};

// ÂàáÊç¢ÁßªÂä®Á´ØËèúÂçï
const toggleMobileMenu = () => {
    isMobileMenuOpen.value = !isMobileMenuOpen.value;
};

// ÁõëÂê¨ÊªöÂä®‰∫ã‰ª∂
const handleScroll = () => {
    isScrolled.value = window.scrollY > 10;
    console.log('Scroll event triggered - scrollY:', window.scrollY, 'isScrolled:', isScrolled.value);
};

// Ê†πÊçÆÂΩìÂâçË∑ØÁî±Êõ¥Êñ∞ÊøÄÊ¥ªÁä∂ÊÄÅ
const updateActiveIndex = () => {
  // ÂØπ‰∫é‰∏™‰∫∫‰∏≠ÂøÉÈ°µÈù¢ÔºåÊàë‰ª¨‰∏çËÆæÁΩÆ‰ªª‰ΩïÂØºËà™È°π‰∏∫ÊøÄÊ¥ªÁä∂ÊÄÅ
  if (route.path === '/profile' || route.path === '/admin') {
    activeIndex.value = -1;
  } else {
    activeIndex.value = getRouteIndex(route.path);
  }
};

onMounted(() => {
    window.addEventListener('scroll', handleScroll);
    // ÂàùÂßãÂåñÊó∂Ê†πÊçÆÂΩìÂâçË∑ØÁî±ËÆæÁΩÆÊøÄÊ¥ªÁä∂ÊÄÅ
    updateActiveIndex();
});

onUnmounted(() => {
    window.removeEventListener('scroll', handleScroll);
});

// ÁõëÂê¨Ë∑ØÁî±ÂèòÂåñÔºåÊõ¥Êñ∞ÊøÄÊ¥ªÁä∂ÊÄÅ
watch(
  () => route.path,
  () => {
    updateActiveIndex();
  }
);

// üî¥ Âà†Èô§ÂéüÊù•ÁöÑÊêúÁ¥¢Ê°ÜÊéßÂà∂ÈÄªËæëÔºàisSearchOpen„ÄÅtoggleSearchÔºâ
</script>


<style scoped lang="scss">
#site-header {
    background: transparent;
    position: fixed;
    width: 100%;
    height: 64px;
    top: 0;
    left: 0;
    z-index: 900;
    transition: all 0.3s ease;
    color: white;

    &.scrolled {
        background: rgba(255, 255, 255, 0.95) !important;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
        color: #333 !important;
    }

    &.scrolled .nav-item-title {
        color: #333 !important;
    }

    &.scrolled .nav-link-user,
    &.scrolled .nav-link-store,
    &.scrolled .nav-link-search {
        color: #333 !important;
    }

    &.scrolled .search-btn {
        background-image: url('@/assets/images/searchblack.svg') !important;
    }

    &.scrolled .user-btn {
        background-image: url('@/assets/images/userblack.svg') !important;
    }

    &.scrolled .hamburger,
    &.scrolled .hamburger::before,
    &.scrolled .hamburger::after {
        background: #333 !important;
    }

    &.scrolled .mobile-nav a {
        color: #333 !important;
    }

    /* Â¢ûÂº∫RouterLinkÁöÑÊ†∑ÂºèË¶ÜÁõñ */
    &.scrolled .nav-item-title.router-link-active,
    &.scrolled .nav-item-title.router-link-exact-active {
        color: #333 !important;
    }
    .navbar-container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 100%;
        position: relative;
    }

    .navbar-header {
        display: flex;
        align-items: center;

        .navbar-brand {
            display: inline-block;
            text-decoration: none;
            transition: transform 0.3s ease;

            &:hover {
                transform: scale(1.05);
            }

            .navbar-brand-logo {
                background-image: url('@/assets/images/DJlogo2.svg');
                transition: backgroundImage 0.3s ease;
                vertical-align: middle;
                display: inline-block;
                width: 45px;
                height: 26px;
                background-size: cover;
            }
        }
    }

    .site-header-navbar {
        display: flex;
        align-items: center;
        flex: 1;
        margin: 0 20px;

        .navbar-category {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 10px;
            max-width: 900px;

            .category-item {
                font-size: 14px;
                line-height: 14px;
                position: relative;

                .nav-item-title {
                    color: white;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    height: 64px;
                    padding: 0 15px;
                    text-decoration: none;
                    font-weight: 500;
                    letter-spacing: -0.02em;

                    &:hover {
                        color: #f31515;
                    }
                }

                &.active .nav-item-title {
                    color: #f31515;
                    font-weight: 600;
                }

                &.active::after {
                    content: '';
                    position: absolute;
                    bottom: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 20px;
                    height: 3px;
                    background-color: #f31515;
                    border-radius: 3px;
                }
            }
        }

        .navbar-right {
            list-style: none;
            padding: 0;
            margin: 0 0 0 auto;
            display: flex;
            align-items: center;
            height: 100%;

            >li {
                margin-left: 15px;
                position: relative;
            }

            /* üî¥ ÂÖ≥ÈîÆ‰øÆÊîπÔºöÊêúÁ¥¢ÂõæÊ†á + ÊÇ¨ÊµÆÊêúÁ¥¢Ê†èÊ†∑Âºè */
            .nav-search {
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                height: 100%;
                font-size: 14px;
                line-height: 14px;
                position: relative;
                /* ‰Ωú‰∏∫ÊêúÁ¥¢Ê†èÁöÑÂÆö‰ΩçÂÆπÂô® */

                /* ÊêúÁ¥¢ÂõæÊ†á */
                .nav-link-search {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    text-decoration: none;
                    transition: all 0.3s ease;

                    &:hover {
                        background-color: rgba(0, 0, 0, 0.05);
                    }
                }

                /* ÊÇ¨ÊµÆÂºπÂá∫ÁöÑÊêúÁ¥¢Ê†èÔºàÈªòËÆ§ÈöêËóèÔºâ */
                .search-bar {
                    position: absolute;
                    right: 0;
                    /* ÂØπÈΩêÊêúÁ¥¢ÂõæÊ†áÂè≥‰æß */
                    top: 50%;
                    transform: translateY(-50%) translateX(100%);
                    /* ÂàùÂßãÂú®Âè≥‰æßÂÆåÂÖ®ÈöêËóè */
                    transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
                    opacity: 0;
                    visibility: hidden;
                    /* ÈÅøÂÖçÈöêËóèÊó∂ÂèØÁÇπÂáª */
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    background: white;
                    padding: 4px;
                    border-radius: 24px;
                    /* ÂúÜËßí‰ºòÂåñ */
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
                    /* Èò¥ÂΩ±Â¢ûÂº∫Â±ÇÊ¨° */
                    z-index: 1000;
                    /* Á°Æ‰øùÂú®ÂÖ∂‰ªñÂÖÉÁ¥†‰∏äÊñπ */

                    /* ÊêúÁ¥¢ËæìÂÖ•Ê°Ü */
                    input {
                        width: 300px;
                        /* ÊêúÁ¥¢Ê°ÜÂÆΩÂ∫¶ÔºåÂèØÊåâÈúÄË∞ÉÊï¥ */
                        height: 36px;
                        padding: 0 16px;
                        border: none;
                        border-radius: 18px;
                        /* ‰∏éÈ´òÂ∫¶ÂåπÈÖçÁöÑÂúÜËßí */
                        outline: none;
                        font-size: 14px;
                        background: #f5f5f5;
                        transition: background 0.3s ease;

                        &:focus {
                            background: #eee;
                            /* ËÅöÁÑ¶Êó∂ËÉåÊôØÂèòÂåñ */
                        }
                    }

                    /* ÊêúÁ¥¢ÊåâÈíÆ */
                    .search-submit {
                        height: 36px;
                        padding: 0 16px;
                        border: none;
                        border-radius: 18px;
                        background: #f31515;
                        color: white;
                        font-size: 10px;
                        cursor: pointer;
                        transition: background 0.3s ease, transform 0.2s ease;

                        &:hover {
                            background: #d10f0f;
                            /* Ê∑±Ëâ≤hoverÊïàÊûú */
                            transform: scale(1.05);
                            /* ËΩªÂæÆÊîæÂ§ßÂèçÈ¶à */
                        }

                        &:active {
                            transform: scale(0.98);
                            /* ÁÇπÂáªÊî∂Áº©ÂèçÈ¶à */
                        }
                    }
                }

                /* üî¥ ÊÇ¨ÊµÆËß¶ÂèëÔºöÈº†Ê†áÁßªÂà∞ÊêúÁ¥¢ÂõæÊ†áÂå∫ÂüüÊó∂ÊòæÁ§∫ÊêúÁ¥¢Ê†è */
                &:hover .search-bar {
                    transform: translateY(-50%) translateX(0);
                    /* ‰ªéÂè≥ÂêëÂ∑¶ÂºπÂá∫ */
                    opacity: 1;
                    visibility: visible;
                }

                /* ÊêúÁ¥¢ÂõæÊ†áËÉåÊôØÂõæ */
                .search-btn {
                    background-image: url('@/assets/images/searchwhite.svg');
                    width: 20px;
                    height: 20px;
                    display: inline-block;
                    vertical-align: middle;
                    background-position: center;
                    background-size: cover;
                    transition: transform 0.3s ease;
                }

                /* ÂõæÊ†áhoverÊîæÂ§ß */
                &:hover .search-btn {
                    transform: scale(1.1);
                }
            }

            /* ÁôªÂΩï„ÄÅË¥≠Áâ©ËΩ¶ÂõæÊ†áÊ†∑ÂºèÔºà‰øùÁïôÂéüÈÄªËæëÔºâ */
            .nav-user,
            .nav-store {
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                height: 100%;
                font-size: 14px;
                line-height: 14px;

                .nav-link-user,
                .nav-link-store {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    text-decoration: none;
                    transition: all 0.3s ease;

                    &:hover {
                        background-color: rgba(0, 0, 0, 0.05);
                    }
                }

                .user-btn,
                .store-btn {
                    width: 20px;
                    height: 20px;
                    display: inline-block;
                    vertical-align: middle;
                    background-position: center center;
                    background-size: cover;
                    transition: transform 0.3s ease;
                }

                &:hover .user-btn,
                &:hover .store-btn {
                    transform: scale(1.1);
                }
            }

            .user-btn {
                background-image: url('@/assets/images/userwhite.svg');
            }

            .store-btn {
                background-image: url('@/assets/images/DJstores.svg');
            }
        }
    }

    /* ÁßªÂä®Á´ØËèúÂçïÊåâÈíÆ */
    .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 10px;
        z-index: 1000;

        .hamburger {
                display: block;
                width: 24px;
                height: 2px;
                background: white;
                position: relative;
                transition: all 0.3s ease;

                &::before,
                &::after {
                    content: '';
                    position: absolute;
                    width: 100%;
                    height: 2px;
                    background: white;
                    transition: all 0.3s ease;
                }

            &::before {
                top: -8px;
            }

            &::after {
                bottom: -8px;
            }
        }

        &.active .hamburger {
            background: transparent;

            &::before {
                transform: rotate(45deg) translate(5px, 5px);
            }

            &::after {
                transform: rotate(-45deg) translate(5px, -5px);
            }
        }
    }

    /* ÁßªÂä®Á´ØËèúÂçï */
    .mobile-menu {
        position: fixed;
        top: 64px;
        left: 0;
        width: 100%;
        background: white;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        z-index: 899;

        &.open {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .mobile-nav {
            list-style: none;
            padding: 0;
            margin: 0;

            li {
                border-bottom: 1px solid #f5f5f5;

                &.active a {
                    color: #f31515;
                    font-weight: 600;
                }

                a {
                    display: block;
                    padding: 15px 20px;
                    color: white;
                    text-decoration: none;
                    transition: all 0.3s ease;

                    &:hover {
                        background-color: #f9f9f9;
                        color: #f31515;
                    }
                }
            }
        }
    }

    /* ÂìçÂ∫îÂºèËÆæËÆ° */
    @media (max-width: 992px) {
        .site-header-navbar {
            display: none;
        }

        .mobile-menu-btn {
            display: block;
        }

        /* üî¥ ÁßªÂä®Á´ØÈöêËóèÊÇ¨ÊµÆÊêúÁ¥¢Ê†èÔºàÂèØÊåâÈúÄË∞ÉÊï¥‰∏∫ÁÇπÂáªËß¶ÂèëÔºâ */
        .navbar-right .nav-search .search-bar {
            display: none;
        }
    }

    @media (min-width: 993px) {
        .mobile-menu {
            display: none !important;
        }
    }
}
</style>
```







































# ÂêéÁ´Ø

### ÁõÆÂΩïËß£Êûê

















# ÈÅáËßÅÁöÑÈóÆÈ¢ò

##  ‚Äú**ÂîØ‰∏ÄÊ†áËØÜÂ≠òÂÇ®**‚Äù‚Äú**ÂàáÊñ≠Ë∑®Ê∫êÈÄöÈÅì**‚Äù‚Äú**ÂêéÁ´ØÊ†°È™åÈöîÁ¶ª**‚Äù

ÊàëÂÖàËøêË°å5173Á´ØÂè£Ëøô‰∏™È°πÁõÆÁôªÂΩï‰∫ßÁîü‰∏Ä‰∏™tokenÂ≠òÂÇ®Âú®5173ÔºåÂêéÊù•ÊàëÂèàËøêË°åÂè¶‰∏Ä‰∏™È°πÁõÆÂú®Á´ØÂè£5174Ôºå‰∏∫‰ªÄ‰πàËøô‰∏™È°πÁõÆ‰ºöËá™Âä®Ëé∑Âèñ5173Á´ØÂè£ÁöÑtokenÁÑ∂ÂêéËá™Âä®ÂèòÊàêÁôªÂΩïÁä∂ÊÄÅÔºåËÄå‰∏îÊï∞ÊçÆ‰πüÂÖ®ÈÉ®‰º†ËøáÊù•ÔºåÊàëÊ∏ÖÈô§5174ÁöÑÊú¨Âú∞ÁºìÂ≠ò‰πãÂêéÔºåÈáçÊñ∞ÂêØÂä®‰πãÂêéÂ∞±Ê≤°Êúâ‰∫ÜÔºå‰∏§‰∏™ÁΩëÁ´ôÁöÑcookieÈÉΩ‰∏∫Á©∫„ÄÇÊàëÊ∏ÖÈô§5174ÁöÑÊú¨Âú∞ÁºìÂ≠ò‰πãÂêéÈáçÊñ∞ÂêØÂä®È°πÁõÆ‰πãÂêéÂ∞±Ê≤°Êúâ‰∫ÜÔºåÈúÄË¶ÅËá™Â∑±ÁôªÂΩï„ÄÇËß£Èáä‰∏äÈù¢‰∫ãÊÉÖÂèëÁîüÁöÑÂéüÁêÜÔºå‰ª•ÂèäÂëäËØâÊàëÊÄé‰πàÈÅøÂÖçÊàë‰ªégithub git cloneËøô‰∏™È°πÁõÆÂêØÂä®ÂêéÂ∞±‰ºöÂõ†‰∏∫5173‰∏≠Â≠òÂÇ®ÁöÑtokenËÄå‰∫ßÁîüËá™Âä®ÁôªÂΩï

Ë¶ÅËß£ÂÜ≥‰∏§‰∏™Êú¨Âú∞È°πÁõÆÔºà5173/5174 Á´ØÂè£ÔºâÂÖ±‰∫´ÁôªÂΩïÊÄÅÁöÑÈóÆÈ¢òÔºåÈúÄÂÖàÊòéÁ°Æ**ÊµèËßàÂô®Â≠òÂÇ®ÈöîÁ¶ªËßÑÂàô**‰∏é**È°πÁõÆÈÄªËæëÊºèÊ¥û**ÁöÑÊ†∏ÂøÉÂéüÁêÜÔºåÂÜçÈíàÂØπÊÄßÂàáÊñ≠Ë∑®Ê∫êÊï∞ÊçÆ‰º†ÈÄíÈÄöÈÅì„ÄÇ

### ‰∏Ä„ÄÅÁé∞Ë±°ËÉåÂêéÁöÑÊ†∏ÂøÉÂéüÁêÜ

‰Ω†ÈÅáÂà∞ÁöÑ ‚Äú5174 Ëá™Âä®ËØªÂèñ 5173 ÁöÑ token‚ÄùÔºåÊú¨Ë¥®ÊòØ**ÂâçÁ´ØÂ≠òÂÇ®Ë∑®Ê∫ê‰º†ÈÄí + È°πÁõÆÈÄªËæëÊú™ÈöîÁ¶ª**ÂØºËá¥ÁöÑÔºåËÄåÈùûÊµèËßàÂô®ÂéüÁîüÂ≠òÂÇ® ‚ÄúÊâìÁ†¥ÂêåÊ∫êÁ≠ñÁï•‚ÄùÔºàÊµèËßàÂô®‰∏•Ê†ºÊåâ„ÄåÂçèËÆÆ + ÂüüÂêç + Á´ØÂè£„ÄçÈöîÁ¶ª localStorage/sessionStorageÔºâ„ÄÇÂÖ∑‰ΩìÊãÜËß£‰∏∫‰∏§‰∏™ÂÖ≥ÈîÆÁéØËäÇÔºö

1. ÊµèËßàÂô®Â≠òÂÇ®ÁöÑ ‚ÄúÈöîÁ¶ªÊÄß‚Äù ‰∏é ‚ÄúÂèØ‰º†ÈÄíÊÄß‚Äù

ÊµèËßàÂô®ÁöÑ`localStorage`/`sessionStorage`ÈÅµÂæ™**ÂêåÊ∫êÁ≠ñÁï•**Ôºö‰ªÖÂÖÅËÆ∏ÂΩìÂâç„ÄåÂçèËÆÆ + ÂüüÂêç + Á´ØÂè£„ÄçÁöÑÈ°µÈù¢ËØªÂÜôËá™Ë∫´Â≠òÂÇ®Ôºà‰æãÔºö`localhost:5173`ÁöÑÂ≠òÂÇ®Êó†Ê≥ïË¢´`localhost:5174`Áõ¥Êé•ËØªÂèñÔºâ„ÄÇ‰ΩÜ‰ª•‰∏ãÂú∫ÊôØ‰ºöÂØºËá¥Ë∑®Ê∫ê‰º†ÈÄí tokenÔºö

- **Â≠òÂÇ® key ÂÜ≤Á™Å + Ë∑®Ê∫êÊï∞ÊçÆÊ≥®ÂÖ•**Ôºö‰∏§‰∏™È°πÁõÆÂ≠òÂÇ® token ÁöÑ key Áõ∏ÂêåÔºàÂ¶ÇÈÉΩÁî®`token`‰Ωú‰∏∫ keyÔºâÔºå‰∏î 5173 ÈÄöËøá„ÄåË∑®Ê∫êÈÄö‰ø°„ÄçÂ∞Ü token ‰º†ÈÄíÁªô 5174ÔºàÂ¶Ç 5173 ÁöÑÈ°µÈù¢Áî®`postMessage`ÂèëÈÄÅ tokenÔºå5174 ÁöÑÈ°µÈù¢ÁõëÂê¨`postMessage`Âπ∂Â∞Ü token Â≠òÂÖ•Ëá™Ë∫´`localStorage`Ôºâ„ÄÇ
- **ÊµèËßàÂô®Êèí‰ª∂ / ÁºìÂ≠òÂπ≤Êâ∞**ÔºöÈÉ®ÂàÜË∑®ÂüüË∞ÉËØïÊèí‰ª∂„ÄÅÁºìÂ≠òÂêåÊ≠•Êèí‰ª∂ÂèØËÉΩÁªïËøáÂêåÊ∫êÁ≠ñÁï•ÔºåÂ∞Ü 5173 ÁöÑÂ≠òÂÇ®Êï∞ÊçÆÂêåÊ≠•Âà∞ 5174ÔºõÊàñÊµèËßàÂô®ÁºìÂ≠ò‰∫Ü 5173 ÁöÑ token ËØ∑Ê±ÇÔºå5174 ÂêØÂä®Êó∂Â§çÁî®‰∫ÜÁºìÂ≠òÁöÑ token ÂìçÂ∫î„ÄÇ

2. È°πÁõÆÈÄªËæëÁöÑ ‚ÄúÊú™ÈöîÁ¶ª‚Äù ÊºèÊ¥û

- **token ËØªÂèñÊú™Ê†°È™åÊù•Ê∫ê**Ôºö5174 ÁöÑ‰ª£Á†Å‰ªÖÂà§Êñ≠ ‚ÄúÊòØÂê¶Â≠òÂú®`token` key‚ÄùÔºåÊú™Ê†°È™å token ÊòØÂê¶Â±û‰∫éËá™Ë∫´È°πÁõÆÔºàÂ¶ÇÊú™ÈôÑÂä†È°πÁõÆÊ†áËØÜÔºâÔºåÁõ¥Êé•‰ΩøÁî®‰∫Ü 5173 Ê≥®ÂÖ•ÁöÑ token„ÄÇ
- **ÂêéÁ´Ø‰ºöËØùÊú™ÈöîÁ¶ª**ÔºöËã•‰∏§‰∏™È°πÁõÆÂØπÊé•Âêå‰∏ÄÂêéÁ´ØÔºåÂêéÁ´ØÊú™ÊåâÈ°πÁõÆ / Á´ØÂè£ÈöîÁ¶ªÁôªÂΩï‰ºöËØùÔºàÂ¶Ç‰ªÖÁî® IP ËØÜÂà´Áî®Êà∑ÔºâÔºå5173 ÁôªÂΩïÂêéÔºå5174 ËØ∑Ê±ÇÊé•Âè£Êó∂ÂêéÁ´ØËØØÂ∞ÜÂÖ∂ÂÖ≥ËÅîÂà∞ 5173 ÁöÑ‰ºöËØùÔºåËøîÂõûÁôªÂΩïÊÄÅ„ÄÇ

### ‰∫å„ÄÅÈÅøÂÖçËá™Âä®ÁôªÂΩïÁöÑËß£ÂÜ≥ÊñπÊ°à

Ê†∏ÂøÉÁõÆÊ†áÔºö**ÂàáÊñ≠ 5174 Ëé∑Âèñ 5173 token ÁöÑÈÄöÈÅì** + **Á°Æ‰øù 5174 ‰ªÖ‰ΩøÁî®Ëá™Ë∫´Ê∫êÁöÑÊúâÊïà token**ÔºåÂÖ∑‰ΩìÂàÜ 5 Ê≠•ËêΩÂú∞Ôºö

1. **ËÆ© token Â≠òÂÇ® ‚ÄúÂ∏¶ÂîØ‰∏ÄÊ†áËØÜ‚ÄùÔºåÈÅøÂÖçÂÜ≤Á™Å**

‰∏§‰∏™È°πÁõÆÁî®Áõ∏ÂêåÁöÑ`key`ÔºàÂ¶Ç`token`ÔºâÂ≠òÂÇ®ÔºåÊòØË∑®Ê∫êÂ§çÁî®ÁöÑÁõ¥Êé•ËØ±Âõ†„ÄÇÈúÄÁªôÂ≠òÂÇ® key Âä† ‚ÄúÈ°πÁõÆ‰∏ìÂ±ûÊ†áËØÜ‚ÄùÔºö

- ‰øÆÊîπÂ≠òÂÇ® key

  ÔºöÂ∞ÜÂ≠òÂÇ® token ÁöÑ key ‰ªéÈÄöÁî®ÂêçÊîπ‰∏∫ ‚ÄúÈ°πÁõÆ + Á´ØÂè£‚Äù ÂîØ‰∏ÄÂÄºÔºå‰æãÔºö

  javascript

  ```javascript
  // 5174È°πÁõÆÁöÑÂ≠òÂÇ®ÈÄªËæëÔºàÊõøÊç¢Âéü‰ª£Á†ÅÔºâ
  const TOKEN_KEY = `token_${import.meta.env.VITE_PORT}`; // Áî®ÁéØÂ¢ÉÂèòÈáèÂå∫ÂàÜÁ´ØÂè£
  // Â≠òÂÇ®token
  localStorage.setItem(TOKEN_KEY, token);
  // ËØªÂèñtokenÔºà‰ªÖËØªËá™Ë∫´keyÔºâ
  const token = localStorage.getItem(TOKEN_KEY);
  ```

- **Ê∏ÖÈô§ÂéÜÂè≤ÂÜ≤Á™Å key**ÔºöÂêØÂä® 5174 ÂâçÔºåÊâãÂä®Âà†Èô§ÊµèËßàÂô®‰∏≠`localhost:5174`‰∏ãÁöÑÊóß`token`ÔºàÊµèËßàÂô® F12‚ÜíApplication‚ÜíStorage‚ÜíLocal Storage‚ÜíÊâæÂà∞`localhost:5174`‚ÜíÂà†Èô§`token`Êù°ÁõÆÔºâ„ÄÇ

2. **ÂàáÊñ≠Ë∑®Ê∫êÊï∞ÊçÆ‰º†ÈÄíÈÄöÈÅì**

Ëã•È°πÁõÆ‰∏≠Â≠òÂú®`postMessage`ÔºàË∑®È°µÈù¢ÈÄö‰ø°ÔºâÈÄªËæëÔºåÈúÄÈôêÂà∂ÂÖ∂ ‚Äú‰ªÖÊé•Êî∂ÂèØ‰ø°Ê∫ê‚ÄùÔºåÈÅøÂÖç 5173 Ê≥®ÂÖ• tokenÔºö

- Ê£ÄÊü•Âπ∂‰øÆÊîπ postMessage ÁõëÂê¨

  ÔºöÂà†Èô§Êó†ÈôêÂà∂ÁöÑ

  ```
  message
  ```

  ‰∫ã‰ª∂ÁõëÂê¨ÔºåÊàñÊ∑ªÂä†Ê∫êÊ†°È™åÔºö

  javascript

  ```javascript
  // ÈîôËØØÂÜôÊ≥ïÔºàÊó†ÈôêÂà∂Êé•Êî∂Ôºâ
  window.addEventListener('message', (e) => {
    if (e.data.type === 'TOKEN') localStorage.setItem('token', e.data.value); // È£éÈô©ÔºÅ
  });
  
  // Ê≠£Á°ÆÂÜôÊ≥ïÔºà‰ªÖÊé•Êî∂Ëá™Ë∫´Ê∫êÊàñÂèØ‰ø°ÂüüÂêçÔºâ
  window.addEventListener('message', (e) => {
    // ‰ªÖÂÖÅËÆ∏ÂΩìÂâçÈ°πÁõÆÊ∫êÔºà5174ÔºâÊàñÂêéÁ´ØÂüüÂêçÂèëÈÄÅÊ∂àÊÅØ
    const trustedOrigins = ['http://localhost:5174', 'https://your-backend.com'];
    if (!trustedOrigins.includes(e.origin)) return; // ÈùûÂèØ‰ø°Ê∫êÁõ¥Êé•ÂøΩÁï•
    if (e.data.type === 'TOKEN') localStorage.setItem(TOKEN_KEY, e.data.value);
  });
  ```

- **Á¶ÅÁî®Ë∑®Ê∫êÂπ≤Êâ∞Êèí‰ª∂**ÔºöÂÖ≥Èó≠ÊµèËßàÂô®‰∏≠ ‚ÄúË∑®ÂüüË∞ÉËØï‚Äù‚ÄúÁºìÂ≠òÂêåÊ≠•‚Äù Á±ªÊèí‰ª∂ÔºàÂ¶Ç CORS Unblock„ÄÅCache KillerÔºâÔºåËøôÁ±ªÊèí‰ª∂ÂèØËÉΩÁªïËøáÂêåÊ∫êÁ≠ñÁï•ÂêåÊ≠•Â≠òÂÇ®Êï∞ÊçÆ„ÄÇ

3. **ËÆ©ÂêéÁ´Ø ‚ÄúÈöîÁ¶ª‰ºöËØù‚ÄùÔºåÊãíÁªùÂÖ∂‰ªñÈ°πÁõÆÁöÑ token**

Ëã•‰∏§‰∏™È°πÁõÆÂØπÊé•Âêå‰∏ÄÂêéÁ´ØÔºåÈúÄËÆ©ÂêéÁ´ØÊåâ ‚ÄúÈ°πÁõÆÊ†áËØÜ‚Äù Âå∫ÂàÜÁôªÂΩï‰ºöËØùÔºåÈÅøÂÖçÂ§çÁî® 5173 ÁöÑ tokenÔºö

- ËØ∑Ê±ÇÊó∂ÈôÑÂä†È°πÁõÆÊ†áËØÜ

  Ôºö5174 ËØ∑Ê±ÇÊé•Âè£Êó∂ÔºåÂú® Header ‰∏≠Ê∑ªÂä†‰∏ìÂ±ûÊ†áËØÜÔºàÂ¶ÇÁ´ØÂè£ÔºâÔºå‰æãÔºö

  javascript

  ```javascript
  // 5174È°πÁõÆÁöÑËØ∑Ê±ÇÊã¶Êà™Âô®ÔºàAxios‰∏∫‰æãÔºâ
  axios.interceptors.request.use((config) => {
    config.headers['X-Project-Port'] = import.meta.env.VITE_PORT; // ‰º†ÈÄí5174Á´ØÂè£
    config.headers['Authorization'] = `Bearer ${token}`;
    return config;
  });
  ```

- **ÂêéÁ´ØÊ†°È™åÈ°πÁõÆÊ†áËØÜ**ÔºöÂêéÁ´ØÊé•Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂÖàÊ†°È™å`X-Project-Port`‰∏é token ÁöÑÂÖ≥ËÅîÊÄßÔºàÂ¶Ç token ‰∏≠ÂµåÂÖ•Á´ØÂè£‰ø°ÊÅØÔºâÔºåËã• token Â±û‰∫é 5173ÔºàÁ´ØÂè£‰∏çÂåπÈÖçÔºâÔºåÂàôËøîÂõû ‚Äútoken Êó†Êïà‚ÄùÔºåÂº∫Âà∂ 5174 ÈáçÊñ∞ÁôªÂΩï„ÄÇ

4. **‰ºòÂåñ Vite ÂºÄÂèëÁéØÂ¢ÉÈöîÁ¶ª**

Vite ÂºÄÂèëÁéØÂ¢ÉÁöÑÈªòËÆ§ÈÖçÁΩÆÂèØËÉΩÂ≠òÂú® ‚ÄúÊ∫êÊ∑∑Ê∑Ü‚ÄùÔºåÈúÄÈÄöËøá`vite.config.js`Âº∫ÂåñÈöîÁ¶ªÔºö

javascript

```javascript
// vite.config.js
export default defineConfig({
  server: {
    port: 5174, // Âõ∫ÂÆöÁ´ØÂè£
    headers: {
      'Cache-Control': 'no-store', // Á¶ÅÁî®ÊµèËßàÂô®ÁºìÂ≠òÔºåÈÅøÂÖçÂ§çÁî®5173ÁöÑtokenÁºìÂ≠ò
      'X-Frame-Options': 'DENY', // Á¶ÅÊ≠¢ÂµåÂÖ•5173ÁöÑiframeÔºåÂàáÊñ≠iframeË∑®Ê∫êÈÄö‰ø°
    },
    origin: 'http://localhost:5174', // ÊòéÁ°ÆÂΩìÂâçÊ∫êÔºåÈÅøÂÖçViteËøîÂõûÊ®°Á≥äÊ∫êÂØºËá¥Ê∑∑Ê∑Ü
  },
  define: {
    'import.meta.env.VITE_PORT': JSON.stringify(5174), // Ê≥®ÂÖ•Á´ØÂè£ÁéØÂ¢ÉÂèòÈáèÔºà‰æõÂ≠òÂÇ®key‰ΩøÁî®Ôºâ
  },
});
```

5. ÂêØÂä®Êó∂ ‚ÄúÊ†°È™å token ÊúâÊïàÊÄß‚ÄùÔºåËÄåÈùûÁõ¥Êé•‰ΩøÁî®

Âç≥‰Ωø 5174 ÁöÑÂ≠òÂÇ®‰∏≠Â≠òÂú® tokenÔºå‰πüÈúÄÂÖàÂêëÂêéÁ´ØÈ™åËØÅÊòØÂê¶Â±û‰∫éËá™Ë∫´È°πÁõÆÔºåÈÅøÂÖçÊó†Êïà token Ëá™Âä®ÁôªÂΩïÔºö

javascript

```javascript
// 5174È°πÁõÆÂêØÂä®Êó∂ÁöÑÁôªÂΩïÊÄÅÊ†°È™åÈÄªËæë
async function checkLoginState() {
  const token = localStorage.getItem(TOKEN_KEY);
  if (!token) return false; // Êó†tokenÔºåË∑≥ËΩ¨ÁôªÂΩï

  try {
    // ÂêëÂêéÁ´ØÂèëÈÄÅ‚ÄútokenÊúâÊïàÊÄßÊ†°È™åËØ∑Ê±Ç‚Äù
    const res = await axios.get('/api/check-token', {
      headers: { 'X-Project-Port': import.meta.env.VITE_PORT },
    });
    return res.data.valid; // ÂêéÁ´ØËøîÂõûtrueÂàô‰øùÊåÅÁôªÂΩïÔºåfalseÂàôÊ∏ÖÈô§token
  } catch (err) {
    localStorage.removeItem(TOKEN_KEY); // Ê†°È™åÂ§±Ë¥•ÔºåÊ∏ÖÈô§token
    window.location.href = '/login'; // Ë∑≥ËΩ¨ÁôªÂΩïÈ°µ
    return false;
  }
}

// È°πÁõÆÂàùÂßãÂåñÊó∂ÊâßË°åÊ†°È™å
checkLoginState();
```

### ‰∏â„ÄÅÊÄªÁªì

ÈóÆÈ¢òÊ†πÊ∫êÊòØ„ÄåÂ≠òÂÇ® key ÂÜ≤Á™Å + Ë∑®Ê∫êÊï∞ÊçÆ‰º†ÈÄí + ÂêéÁ´Ø‰ºöËØùÊú™ÈöîÁ¶ª„ÄçÔºåËß£ÂÜ≥ÊñπÊ°àÂõ¥Áªï ‚Äú**ÂîØ‰∏ÄÊ†áËØÜÂ≠òÂÇ®**‚Äù‚Äú**ÂàáÊñ≠Ë∑®Ê∫êÈÄöÈÅì**‚Äù‚Äú**ÂêéÁ´ØÊ†°È™åÈöîÁ¶ª**‚Äù ‰∏â‰∏™Ê†∏ÂøÉÔºåÁ°Æ‰øù 5174 ‰ªÖ‰ΩøÁî®Ëá™Ë∫´ÁîüÊàêÁöÑÊúâÊïà tokenÔºåÂΩªÂ∫ïÈÅøÂÖç ‚Äúclone È°πÁõÆÂêéËá™Âä®ÁôªÂΩï‚Äù ÁöÑÊÉÖÂÜµ„ÄÇ



### Ëß£ÂÜ≥ÊñπÊ≥ïÔºö

ÁªìÂêà‰Ω†Êèê‰æõÁöÑ **5173ÔºàÂ∞èÂÖîÈ≤úÔºâ** Âíå **5174ÔºàÁßüÂÆ¢Ë°åÔºâ** È°πÁõÆÂÆåÊï¥‰ª£Á†ÅÔºåËá™Âä®ÁôªÂΩïÁöÑÊ†∏ÂøÉÂéüÂõ†ÊòØ **Pinia Store ID ÂÜ≤Á™Å + ÊåÅ‰πÖÂåñÂ≠òÂÇ®Ë∑®È°πÁõÆÂ§çÁî®**ÔºåËÄåÈùûÊµèËßàÂô®ÂéüÁîüË∑®Ê∫êËØªÂèñ„ÄÇ‰ª•‰∏ãÊòØÂÖ∑‰ΩìÂéüÁêÜÊãÜËß£ÂíåÂèØÁõ¥Êé•ËêΩÂú∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÔºö

#### ‰∏Ä„ÄÅËá™Âä®ÁôªÂΩïÁöÑÊ†πÊú¨ÂéüÂõ†Ôºà‰ªé‰ª£Á†Å‰∏≠ÂÆö‰ΩçÔºâ

‰∏§‰∏™È°πÁõÆÁöÑ **Pinia Áä∂ÊÄÅÁÆ°ÁêÜÈÄªËæë** Âíå **ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÈÖçÁΩÆ** Â≠òÂú®ÂÜ≤Á™ÅÔºåÂØºËá¥ 5174 ËØØËØª‰∫Ü 5173 Â≠òÂÇ®ÁöÑ TokenÔºåÂÖ∑‰ΩìÂàÜ 3 Ê≠•Ôºö

1. **5173 È°πÁõÆÔºöPinia Ëá™Âä®ÊåÅ‰πÖÂåñ Token Âà∞ localStorage**

5173 ÁöÑ `useUserStore` ÈÖçÁΩÆ‰∫Ü **`persist: true`**ÔºàPinia Persisted State Êèí‰ª∂ÁöÑÊ†∏ÂøÉÈÖçÁΩÆÔºâÔºö

javascript

```javascript
// 5173 ÁöÑ useUserStoreÔºàÂÖ≥ÈîÆ‰ª£Á†ÅÔºâ
export const useUserStore = defineStore(
  'user', // Store ID ‰∏∫ "user"
  () => { /* Áä∂ÊÄÅÈÄªËæë */ },
  {
    persist: true // ÂºÄÂêØËá™Âä®ÊåÅ‰πÖÂåñÔºöÂ∞Ü Store Êï∞ÊçÆÂ≠òÂà∞ localStorage
  }
)
```

- **ÊåÅ‰πÖÂåñËßÑÂàô**ÔºöPinia Persisted State Êèí‰ª∂‰ºöÈªòËÆ§Â∞Ü Store Êï∞ÊçÆÂ≠òÂÖ• `localStorage`ÔºåÂ≠òÂÇ®ÁöÑ **key ‰∏∫ `pinia/${storeId}`**ÔºàÂç≥ `pinia/user`Ôºâ„ÄÇ
- **Â≠òÂÇ®ÂÜÖÂÆπ**Ôºö5173 ÁôªÂΩïÂêéÔºå`userStore.userInfo` ÂåÖÂê´ TokenÔºåÊèí‰ª∂‰ºöËá™Âä®Â∞Ü `userInfo`ÔºàÂê´ TokenÔºâÂÜôÂÖ• `localStorage` ÁöÑ `pinia/user` ÈîÆ‰∏≠„ÄÇ

2. **5174 È°πÁõÆÔºöËØØËØª 5173 ÁöÑ Pinia ÊåÅ‰πÖÂåñÂ≠òÂÇ®**

5174 ÁöÑ `useUserStore` ËôΩÁÑ∂Ê≤°ÊúâÊòæÂºèÈÖçÁΩÆ `persist: true`Ôºå‰ΩÜÂ≠òÂú®‰∏§‰∏™ÂÖ≥ÈîÆÊºèÊ¥ûÔºö

- **Store ID ÂÜ≤Á™Å**Ôºö5174 ÁöÑ Store ID ‰πü‰∏∫ `user`Ôºà‰∏é 5173 ÂÆåÂÖ®‰∏ÄËá¥ÔºâÔºö

  javascript

  ```javascript
  // 5174 ÁöÑ useUserStoreÔºàÂÖ≥ÈîÆ‰ª£Á†ÅÔºâ
  export const useUserStore = defineStore('user', { /* Áä∂ÊÄÅÈÄªËæë */ })
  ```

  Ëã• 5174 È°πÁõÆ‰∏≠ **ÂÆâË£Ö‰∫Ü Pinia Persisted State Êèí‰ª∂**ÔºàÂç≥‰ΩøÊú™ÊòæÂºèÈÖçÁΩÆ `persist`ÔºâÔºåÊèí‰ª∂‰ºöÈªòËÆ§ËØªÂèñ `localStorage` ‰∏≠ `pinia/user` ÈîÆÁöÑÊï∞ÊçÆÔºàÂç≥ 5173 Â≠òÂÇ®ÁöÑ TokenÔºâÔºåÂπ∂Ê≥®ÂÖ•Âà∞ 5174 ÁöÑ `userStore` ‰∏≠„ÄÇ

- **ÊâãÂä®ËØªÂèñÂ≠òÂÇ®Êú™ÂÅöÈöîÁ¶ª**Ôºö5174 ÁöÑ `userStore` ÊâãÂä®‰ªé `localStorage` ËØªÂèñ `token` Âíå `userInfo`Ôºö

  javascript

  ```javascript
  // 5174 ÁöÑ userStore ÂàùÂßãÂåñÔºàÂÖ≥ÈîÆ‰ª£Á†ÅÔºâ
  state: () => ({
    token: localStorage.getItem('token') || '', // ËØªÂèñ "token" ÈîÆ
    userInfo: JSON.parse(localStorage.getItem('userInfo') || 'null') // ËØªÂèñ "userInfo" ÈîÆ
  })
  ```

  Ëã• 5173 ÊúâÈÄªËæëÔºàÂ¶ÇÊèí‰ª∂„ÄÅËØØÂÜô‰ª£Á†ÅÔºâÂ∞Ü `pinia/user` ‰∏≠ÁöÑ Token Â§çÂà∂Âà∞ `token` ÈîÆÔºå5174 ‰ºöÁõ¥Êé•ËØªÂèñËØ• Token Âπ∂Áî®‰∫éËØ∑Ê±Ç„ÄÇ

3. **ÂêéÁ´ØÊú™Ê†°È™å Token ÂΩíÂ±ûÔºåÁõ¥Êé•ÈÄöËøáËÆ§ËØÅ**

‰∏§‰∏™È°πÁõÆËã•ÂØπÊé• **Âêå‰∏ÄÂêéÁ´Ø**ÔºåÂêéÁ´Ø‰ªÖÈ™åËØÅ Token ÊúâÊïàÊÄßÔºàÂ¶ÇÁ≠æÂêçÊòØÂê¶Ê≠£Á°ÆÔºâÔºåÊú™Ê†°È™å Token Â±û‰∫éÂì™‰∏™È°πÁõÆÔºà5173/5174ÔºâÔºåÂØºËá¥ 5174 Êê∫Â∏¶ 5173 ÁöÑ Token ËØ∑Ê±ÇÊó∂ÔºåÂêéÁ´ØËÆ§‰∏∫ÊòØÂêàÊ≥ïÁôªÂΩïÊÄÅÔºåËøîÂõûÁî®Êà∑Êï∞ÊçÆ„ÄÇ

#### ‰∫å„ÄÅÂΩªÂ∫ïËß£ÂÜ≥Ôºö3 Ê≠•ÂàáÊñ≠Ë∑®È°πÁõÆ Token Â§çÁî®

Ê†∏ÂøÉÁõÆÊ†áÔºö**ËÆ©‰∏§‰∏™È°πÁõÆÁöÑÂ≠òÂÇ® key ÂÆåÂÖ®‰∏çÂÜ≤Á™Å** + **Á°Æ‰øù Token ‰ªÖÂΩíÂ±ûËá™Ë∫´È°πÁõÆ**Ôºå‰ª•‰∏ãÊòØÂèØÁõ¥Êé•Â§çÂà∂‰øÆÊîπÁöÑ‰ª£Á†ÅÊñπÊ°àÔºö

**Á¨¨‰∏ÄÊ≠•ÔºöÁªô Pinia Store Âä† ‚ÄúÈ°πÁõÆ‰∏ìÂ±û ID‚ÄùÔºåÈÅøÂÖçÂÜ≤Á™Å**

‰∏§‰∏™È°πÁõÆÁöÑ Store ID Âùá‰∏∫ `user` ÊòØÂÜ≤Á™ÅÊ†πÊ∫êÔºåÈúÄÊ∑ªÂä†È°πÁõÆ / Á´ØÂè£Ê†áËØÜÔºö

javascript

```javascript
// 1. 5173 È°πÁõÆÔºö‰øÆÊîπ useUserStore ÁöÑ Store IDÔºàÂä†Á´ØÂè£Ê†áËØÜÔºâ
export const useUserStore = defineStore(
  'user_5173', // ‰∏ìÂ±û IDÔºöÈ°πÁõÆÂêç+Á´ØÂè£
  () => {
    // ÂéüÊúâÈÄªËæë‰∏çÂèòÔºàuserInfo„ÄÅgetUserInfo„ÄÅclearUserInfoÔºâ
  },
  {
    persist: true,
    // ÂèØÈÄâÔºöÊòæÂºèÊåáÂÆöÊåÅ‰πÖÂåñ keyÔºåÈÅøÂÖçÊèí‰ª∂ÈªòËÆ§ËßÑÂàôÂèòÂä®
    persist: {
      key: 'pinia_user_5173', // Ëá™ÂÆö‰πâÂ≠òÂÇ® keyÔºå‰∏é 5174 ÂÆåÂÖ®‰∏çÂêå
      paths: ['userInfo'] // ‰ªÖÊåÅ‰πÖÂåñ userInfoÔºåÂáèÂ∞ëÂÜó‰Ωô
    }
  }
)

// 2. 5174 È°πÁõÆÔºö‰øÆÊîπ useUserStore ÁöÑ Store IDÔºàÂä†Á´ØÂè£Ê†áËØÜÔºâ
export const useUserStore = defineStore(
  'user_5174', // ‰∏ìÂ±û IDÔºöÈ°πÁõÆÂêç+Á´ØÂè£
  {
    state: () => ({
      // ÊâãÂä®Â≠òÂÇ®ÁöÑ key ‰πüÂä†‰∏ìÂ±ûÊ†áËØÜ
      token: localStorage.getItem('token_5174') || '',
      userInfo: JSON.parse(localStorage.getItem('userInfo_5174') || 'null')
    }),
    actions: {
      // ‰øÆÊîπ saveLoginInfoÔºöÂ≠òÂÇ®Âà∞‰∏ìÂ±û key
      saveLoginInfo(token: string, userInfo: UserInfo) {
        this.token = token;
        this.userInfo = userInfo;
        // Â≠òÂÇ®Âà∞Âä†Ê†áËØÜÁöÑ key
        localStorage.setItem('token_5174', token);
        localStorage.setItem('userInfo_5174', JSON.stringify(userInfo));
      },
      // ‰øÆÊîπ logoutÔºöÊ∏ÖÈô§‰∏ìÂ±û key
      logout() {
        this.token = '';
        this.userInfo = null;
        localStorage.removeItem('token_5174');
        localStorage.removeItem('userInfo_5174');
      }
    }
  }
)
```

**Á¨¨‰∫åÊ≠•Ôºö5174 Á¶ÅÁî®‰∏çÂøÖË¶ÅÁöÑ Pinia Persist Êèí‰ª∂**

Ëã• 5174 ‰∏çÈúÄË¶ÅËá™Âä®ÊåÅ‰πÖÂåñÔºàÂ∑≤ÊâãÂä®Â§ÑÁêÜ `localStorage`ÔºâÔºåÈúÄÂΩªÂ∫ïÁßªÈô§ Pinia Persisted State Êèí‰ª∂ÔºåÈÅøÂÖçËØØËØªÔºö

1. Âç∏ËΩΩÊèí‰ª∂

   ÔºàÁªàÁ´ØÊâßË°åÔºâÔºö

   bash

   ```bash
   npm uninstall pinia-plugin-persistedstate
   # Êàñ yarn remove pinia-plugin-persistedstate
   ```

2. Âà†Èô§Êèí‰ª∂Ê≥®ÂÜå‰ª£Á†Å

   ÔºàÈÄöÂ∏∏Âú®

   ```
   main.js
   ```

   Êàñ

   ```
   store/index.js
   ```

   ÔºâÔºö

   javascript

   ```javascript
   // Âà†ÊéâÁ±ª‰ºº‰ª•‰∏ãÁöÑ‰ª£Á†ÅÔºà5174 È°πÁõÆÔºâ
   import { createPinia } from 'pinia';
   import piniaPluginPersistedstate from 'pinia-plugin-persistedstate';
   const pinia = createPinia();
   pinia.use(piniaPluginPersistedstate); // ÁßªÈô§ËøôË°å
   ```

**Á¨¨‰∏âÊ≠•ÔºöÂêéÁ´ØÂä† Token ÂΩíÂ±ûÊ†°È™åÔºàÂÖ≥ÈîÆË°•ÂÖÖÔºâ**

‰ªÖÂâçÁ´ØÂ§ÑÁêÜ‰ªçÊúâÈ£éÈô©ÔºàÂ¶Ç Token Ë¢´ÊâãÂä®Â§çÂà∂ÔºâÔºåÈúÄÂêéÁ´ØÈÖçÂêàÊ†°È™å Token ÊòØÂê¶Â±û‰∫éÂΩìÂâçÈ°πÁõÆÔºö

1. ÂâçÁ´ØËØ∑Ê±ÇÊó∂ÈôÑÂä†È°πÁõÆÊ†áËØÜ

   ÔºöÂú®ËØ∑Ê±ÇÂ§¥Ê∑ªÂä†È°πÁõÆ / Á´ØÂè£‰ø°ÊÅØÔºå5173 Âíå 5174 ÂàÜÂà´‰º†‰∏çÂêåÂÄºÔºö

   javascript

   ```javascript
   // 5173 ÁöÑ request Êã¶Êà™Âô®Ôºà‰øÆÊîπÔºâ
   request.interceptors.request.use((config) => {
     const userStore = useUserStore();
     if (userStore.userInfo.token) {
       config.headers.Authorization = `Bearer ${userStore.userInfo.token}`;
       config.headers['X-Project-Id'] = 'project_5173'; // È°πÁõÆ‰∏ìÂ±ûÊ†áËØÜ
     }
     return config;
   });
   
   // 5174 ÁöÑ request Êã¶Êà™Âô®Ôºà‰øÆÊîπÔºâ
   request.interceptors.request.use((config) => {
     const userStore = useUserStore();
     if (userStore.token) {
       config.headers.Authorization = `Bearer ${userStore.token}`;
       config.headers['X-Project-Id'] = 'project_5174'; // È°πÁõÆ‰∏ìÂ±ûÊ†áËØÜ
     }
     return config;
   });
   ```

2. **ÂêéÁ´ØÊ†°È™å**ÔºöËß£Êûê Token Êó∂ÔºåÂêåÊó∂Ê£ÄÊü• `X-Project-Id` ÊòØÂê¶‰∏é Token ÁîüÊàêÊó∂ÁöÑÈ°πÁõÆ‰∏ÄËá¥ÔºàÂ¶Ç Token payload ‰∏≠ÂµåÂÖ•È°πÁõÆ IDÔºâÔºå‰∏ç‰∏ÄËá¥ÂàôËøîÂõû 401 ÈîôËØØ„ÄÇ

‰∏â„ÄÅÈ™åËØÅ‰∏éÊ∏ÖÁêÜÔºöÁ°Æ‰øùÊóßÊï∞ÊçÆ‰∏çÂπ≤Êâ∞

‰øÆÊîπÂêéÈúÄÊ∏ÖÈô§ÊµèËßàÂô®‰∏≠ÊÆãÁïôÁöÑÊóßÂ≠òÂÇ®Êï∞ÊçÆÔºåÈÅøÂÖçÂéÜÂè≤Êï∞ÊçÆÂπ≤Êâ∞Ôºö

1. ÊâìÂºÄÊµèËßàÂô® F12 ‚Üí ËøõÂÖ• **Application ‚Üí Storage ‚Üí Local Storage**„ÄÇ

2. ÂàÜÂà´Âà†Èô§

   ```
   localhost:5173
   ```

   Âíå

   ```
   localhost:5174
   ```

   ‰∏ãÁöÑ‰ª•‰∏ãÈîÆÔºàËã•Â≠òÂú®ÔºâÔºö

   - `pinia/user`Ôºà5173 ÊóßÂ≠òÂÇ®Ôºâ
   - `token`Ôºà5174 ÊóßÂ≠òÂÇ®Ôºâ
   - `userInfo`Ôºà5174 ÊóßÂ≠òÂÇ®Ôºâ

3. ÈáçÂêØ‰∏§‰∏™È°πÁõÆÔºåÊ≠§Êó∂ 5174 ‰∏ç‰ºöÂÜçËá™Âä®ËØªÂèñ 5173 ÁöÑ TokenÔºåÈúÄÊâãÂä®ÁôªÂΩï„ÄÇ

#### ÊÄªÁªì

ÈóÆÈ¢òÊ†πÊ∫êÊòØ **‚ÄúÂêåÂêç Pinia Store + Ëá™Âä®ÊåÅ‰πÖÂåñ‚Äù ÂØºËá¥ÁöÑÂ≠òÂÇ®ÂÜ≤Á™Å**ÔºåËß£ÂÜ≥ÊñπÊ°àÂõ¥Áªï ‚Äú**ÁªôÂ≠òÂÇ® key Âä†ÂîØ‰∏ÄÊ†áËØÜ**‚Äù Â±ïÂºÄÔºåÂâçÁ´Ø‰øÆÊîπÂêéÈÖçÂêàÂêéÁ´ØÊ†°È™åÔºåÂèØÂΩªÂ∫ïÈÅøÂÖçË∑®È°πÁõÆËá™Âä®ÁôªÂΩïÁöÑÈóÆÈ¢ò„ÄÇÂêéÁª≠‰ªé GitHub clone È°πÁõÆÊó∂ÔºåÂè™Ë¶ÅÁ°Æ‰øù Store ID ÂíåÂ≠òÂÇ® key ‰∏éÊú¨Âú∞ÂÖ∂‰ªñÈ°πÁõÆ‰∏çÈáçÂ§çÔºåÂ∞±‰∏ç‰ºöÂá∫Áé∞Á±ª‰ººÈóÆÈ¢ò„ÄÇ                   







