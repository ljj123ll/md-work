# 介绍

Vue Router 作为 Vue.js 官方路由工具，其设计深度贴合单页应用（SPA）的开发需求，上述功能点覆盖了路由管理的核心场景，以下是对各功能的具体理解：


## 嵌套路由映射  
嵌套路由是应对页面结构层级化的核心能力。在实际开发中，页面通常由多层组件嵌套构成（例如：布局组件包含侧边栏+主内容区，主内容区又包含子组件）。Vue Router 允许通过路由配置的嵌套结构，映射组件的嵌套关系。  
- 实现方式：在路由配置中使用 `children` 字段定义子路由，对应组件中通过 `<router-view>` 嵌套渲染子组件。  
- 应用场景：后台管理系统（如 `/dashboard/analysis` 对应 Dashboard 组件嵌套 Analysis 子组件）、多级导航页面等。  


## 动态路由选择  
动态路由用于匹配「路径结构相同但参数不同」的路由（如不同用户的详情页）。通过在路由路径中使用 `:参数名` 定义动态段（如 `/user/:id`），可匹配 `/user/123`、`/user/456` 等路径。  
- 参数获取：通过 `$route.params`（Vue 2）或 `useRoute().params`（Vue 3）获取动态参数。  
- 注意点：动态参数变化时，组件默认会复用（不会重新初始化），若需监听参数变化，可使用 `watch` 监听 `$route.params` 或组件内导航守卫 `beforeRouteUpdate`。  


## 模块化、基于组件的路由配置  
大型项目中，路由配置会非常复杂。Vue Router 支持将路由按模块拆分（如用户模块、商品模块），再通过 `concat` 或 `addRoute`（Vue Router 4）合并，实现路由配置的模块化管理。  
- 优势：降低单个配置文件的复杂度，便于团队协作（不同模块开发者维护各自路由）。  
- 实践：通常按业务域拆分路由文件（如 `routes/user.js`、`routes/goods.js`），最后在入口文件汇总。  


## 路由参数、查询、通配符  
- **路由参数**：即动态路由中的 `:参数`（如 `/user/:id`），用于标识资源的唯一标识（如用户 ID、商品 ID），存储在 `$route.params` 中。  
- **查询参数**：类似 URL 中的查询字符串（如 `/list?page=1&size=10`），通过 `$route.query` 获取，常用于分页、筛选等非唯一标识场景。  
- **通配符**：使用 `*` 匹配未被定义的路由（如 `*` 或 `/*pathMatch(.*)`），通常用于配置 404 页面。需注意通配符路由应放在配置的最后，避免覆盖其他路由。  


## 过渡效果  
Vue Router 与 Vue 的过渡系统无缝集成，通过将 `<router-view>` 包裹在 `<transition>` 组件中，可实现路由切换时的动画效果（如淡入淡出、滑动）。  
- 定制化：可通过 `name` 属性定义不同过渡类名，或根据路由元信息（`meta`）动态设置过渡效果（如对 `/home` 和 `/about` 应用不同动画）。  


## 细致的导航控制  
通过「导航守卫」实现路由跳转的精细化控制，用于权限校验、登录拦截、数据预加载等场景。导航守卫分为三类：  
- **全局守卫**：`beforeEach`（跳转前）、`afterEach`（跳转后），常用于全局登录验证（如未登录拦截并跳转登录页）。  
- **路由独享守卫**：`beforeEnter`，在单个路由配置中定义，仅作用于当前路由（如限制特定角色访问）。  
- **组件内守卫**：`beforeRouteEnter`（进入组件前）、`beforeRouteUpdate`（参数变化时）、`beforeRouteLeave`（离开组件前），用于组件内的逻辑处理（如离开编辑页时提示未保存）。  


## 自动激活 CSS 类的链接  
`<router-link>` 组件会根据当前路由自动添加激活类，简化导航菜单的样式控制：  
- 默认激活类为 `router-link-active`（模糊匹配，如 `/user` 会匹配 `/user/123`），`router-link-exact-active`（精确匹配）。  
- 可通过 `active-class` 和 `exact-active-class` 自定义类名，结合 CSS 实现活跃导航项的高亮样式。  


## HTML5 history 模式或 hash 模式  
两种路由模式决定了 URL 的表现形式和底层实现：  
- **hash 模式**：URL 中包含 `#`（如 `http://example.com/#/home`），通过监听 `hashchange` 事件实现路由切换，兼容性好（支持 IE9+），无需服务器配置，但 URL 不够美观。  
- **history 模式**：使用 HTML5 History API（`pushState`/`replaceState`），URL 无 `#`（如 `http://example.com/home`），更接近传统 URL，但需要服务器配合（将所有请求转发到 index.html，否则刷新会 404）。  


## 可定制的滚动行为  
通过配置 `scrollBehavior` 函数，控制路由切换时页面的滚动位置，提升用户体验：  
- 常见场景：跳转新路由时自动滚动到顶部（`{ top: 0 }`）；返回上一页时恢复之前的滚动位置（通过 `savedPosition` 实现）；滚动到指定元素（如 `{ el: '#anchor' }`）。  


## URL 的正确编码  
Vue Router 会自动处理 URL 中的特殊字符（如中文、空格、特殊符号），将其编码为符合规范的 `%xx` 格式（如空格编码为 `%20`），避免因 URL 解析错误导致的路由匹配失败，确保参数传递的准确性。  


综上，Vue Router 的这些功能从路由定义、匹配、导航控制到用户体验优化，形成了一套完整的路由解决方案，让 Vue 单页应用的路由管理变得简洁、灵活且可扩展。